[mirai-core](../../index.md) / [net.mamoe.mirai.message](../index.md) / [ContactMessage](./index.md)

# ContactMessage

`@SinceMirai("0.32.0") abstract class ContactMessage : `[`MessagePacket`](../-message-packet/index.md)`<`[`User`](../../net.mamoe.mirai.contact/-user/index.md)`, `[`Contact`](../../net.mamoe.mirai.contact/-contact/index.md)`>, `[`BotEvent`](../../net.mamoe.mirai.event.events/-bot-event/index.md)

一条消息事件.
它是一个 [BotEvent](../../net.mamoe.mirai.event.events/-bot-event/index.md), 因此可以被 [监听](#)

支持的消息类型:
[GroupMessage](../-friend-message/index.md)

**See Also**

[isContextIdenticalWith](../is-context-identical-with.md)

### Constructors

| [&lt;init&gt;](-init-.md) | 一条消息事件. 它是一个 [BotEvent](../../net.mamoe.mirai.event.events/-bot-event/index.md), 因此可以被 [监听](#)`ContactMessage()` |

### Extension Functions

| [broadcast](../../net.mamoe.mirai.event/broadcast.md) | 广播一个事件的唯一途径.`suspend fun <E : `[`Event`](../../net.mamoe.mirai.event/-event.md)`> E.broadcast(): E` |
| [buildForwardMessage](../../net.mamoe.mirai.message.data/build-forward-message.md) | 使用 DSL 构建一个 [ForwardMessage](../../net.mamoe.mirai.message.data/-forward-message/index.md).`fun `[`ContactMessage`](./index.md)`.buildForwardMessage(context: `[`Contact`](../../net.mamoe.mirai.contact/-contact/index.md)` = this.subject, displayStrategy: DisplayStrategy = DisplayStrategy, block: `[`ForwardMessageBuilder`](../../net.mamoe.mirai.message.data/-forward-message-builder/index.md)`.() -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): `[`ForwardMessage`](../../net.mamoe.mirai.message.data/-forward-message/index.md) |
| [isContextIdenticalWith](../is-context-identical-with.md) | 判断两个 [MessagePacket](../-message-packet/index.md) 的 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 是否相同`fun `[`ContactMessage`](./index.md)`.isContextIdenticalWith(another: `[`ContactMessage`](./index.md)`): `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`fun `[`MessagePacket`](../-message-packet/index.md)`<*, *>.~~isContextIdenticalWith~~(another: `[`MessagePacket`](../-message-packet/index.md)`<*, *>): `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html) |
| [nextMessage](../next-message.md) | 挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message/-this-.md) 相同且通过 [筛选](../next-message.md#net.mamoe.mirai.message$nextMessage(net.mamoe.mirai.message.nextMessage.P, kotlin.Long, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.message.nextMessage.P, , kotlin.Boolean)))/filter) 的 [MessagePacket](../-message-packet/index.md)`suspend fun <P : `[`ContactMessage`](./index.md)`> P.nextMessage(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, filter: suspend P.(P) -> `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`): `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)<br>挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message/-this-.md) 相同的 [MessagePacket](../-message-packet/index.md)`suspend fun <P : `[`ContactMessage`](./index.md)`> P.nextMessage(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1): `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md) |
| [nextMessageAsync](../next-message-async.md) | `fun <P : `[`ContactMessage`](./index.md)`> P.nextMessageAsync(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext): Deferred<`[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`>`<br>`fun <P : `[`ContactMessage`](./index.md)`> P.nextMessageAsync(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, filter: suspend P.(P) -> `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`): Deferred<`[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`>` |
| [nextMessageContaining](../next-message-containing.md) | 挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message-containing/-this-.md) 相同的 [MessagePacket](../-message-packet/index.md)`suspend fun <M : `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`> `[`ContactMessage`](./index.md)`.nextMessageContaining(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1): M` |
| [nextMessageContainingAsync](../next-message-containing-async.md) | `fun <M : `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`> `[`ContactMessage`](./index.md)`.nextMessageContainingAsync(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext): Deferred<M>` |
| [nextMessageContainingOrNull](../next-message-containing-or-null.md) | 挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message-containing-or-null/-this-.md) 相同并含有 [M](../next-message-containing-or-null.md#M) 类型的消息的 [MessagePacket](../-message-packet/index.md)`suspend fun <M : `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`> `[`ContactMessage`](./index.md)`.nextMessageContainingOrNull(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1): M?` |
| [nextMessageContainingOrNullAsync](../next-message-containing-or-null-async.md) | `fun <M : `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`> `[`ContactMessage`](./index.md)`.nextMessageContainingOrNullAsync(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext): Deferred<M?>` |
| [nextMessageOrNull](../next-message-or-null.md) | 挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message-or-null/-this-.md) 相同且通过 [筛选](../next-message-or-null.md#net.mamoe.mirai.message$nextMessageOrNull(net.mamoe.mirai.message.nextMessageOrNull.P, kotlin.Long, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.message.nextMessageOrNull.P, , kotlin.Boolean)))/filter) 的 [MessagePacket](../-message-packet/index.md)`suspend fun <P : `[`ContactMessage`](./index.md)`> P.nextMessageOrNull(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, filter: suspend P.(P) -> `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`): `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`?`<br>挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message-or-null/-this-.md) 相同的 [MessagePacket](../-message-packet/index.md)`suspend fun <P : `[`ContactMessage`](./index.md)`> P.nextMessageOrNull(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1): `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`?` |
| [nextMessageOrNullAsync](../next-message-or-null-async.md) | `fun <P : `[`ContactMessage`](./index.md)`> P.nextMessageOrNullAsync(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext): Deferred<`[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`?>` |
| [selectMessages](../../net.mamoe.mirai.event/select-messages.md) | 挂起当前协程, 等待任意一个事件监听器触发后返回其返回值.`suspend fun <T : `[`ContactMessage`](./index.md)`, R> T.selectMessages(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, filterContext: `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)` = true, selectBuilder: `[`MessageSelectBuilder`](../../net.mamoe.mirai.event/-message-select-builder/index.md)`<T, R>.() -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): R` |
| [selectMessagesUnit](../../net.mamoe.mirai.event/select-messages-unit.md) | [selectMessages](../../net.mamoe.mirai.event/select-messages.md) 的 [Unit](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) 返回值捷径 (由于 Kotlin 无法推断 [Unit](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) 类型)`suspend fun <T : `[`ContactMessage`](./index.md)`> T.selectMessagesUnit(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, filterContext: `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)` = true, selectBuilder: `[`MessageSelectBuilderUnit`](../../net.mamoe.mirai.event/-message-select-builder-unit/index.md)`<T, `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`>.() -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) |
| [whileSelectMessages](../../net.mamoe.mirai.event/while-select-messages.md) | 挂起当前协程, 等待任意一个事件监听器返回 `false` 后返回.`suspend fun <T : `[`ContactMessage`](./index.md)`> T.whileSelectMessages(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, filterContext: `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)` = true, selectBuilder: `[`MessageSelectBuilder`](../../net.mamoe.mirai.event/-message-select-builder/index.md)`<T, `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`>.() -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) |

### Inheritors

| [FriendMessage](../-friend-message/index.md) | 好友消息`class FriendMessage : `[`ContactMessage`](./index.md)`, `[`BroadcastControllable`](../../net.mamoe.mirai.event/-broadcast-controllable/index.md) |
| [GroupMessage](../-group-message/index.md) | `class GroupMessage : `[`ContactMessage`](./index.md)`, `[`Event`](../../net.mamoe.mirai.event/-event.md) |
| [TempMessage](../-temp-message/index.md) | 临时会话消息`class TempMessage : `[`ContactMessage`](./index.md)`, `[`BroadcastControllable`](../../net.mamoe.mirai.event/-broadcast-controllable/index.md) |

