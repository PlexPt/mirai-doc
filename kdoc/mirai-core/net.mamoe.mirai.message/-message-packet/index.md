[mirai-core](../../index.md) / [net.mamoe.mirai.message](../index.md) / [MessagePacket](./index.md)

# MessagePacket

`abstract class ~~MessagePacket~~<TSender : `[`User`](../../net.mamoe.mirai.contact/-user/index.md)`, TSubject : `[`Contact`](../../net.mamoe.mirai.contact/-contact/index.md)`> : `[`MessagePacketBase`](../-message-packet-base/index.md)`<TSender, TSubject>`
**Deprecated:** use ContactMessage

一条从服务器接收到的消息事件.
请查看各平台的 `actual` 实现的说明.

### Constructors

| [&lt;init&gt;](-init-.md) | 一条从服务器接收到的消息事件. 请查看各平台的 `actual` 实现的说明.`MessagePacket()` |

### Functions

| [downloadAndClose](download-and-close.md) | 下载图片到 [output](download-and-close.md#net.mamoe.mirai.message.MessagePacket$downloadAndClose(net.mamoe.mirai.message.data.Image, java.io.OutputStream)/output) 并关闭这个 [output](download-and-close.md#net.mamoe.mirai.message.MessagePacket$downloadAndClose(net.mamoe.mirai.message.data.Image, java.io.OutputStream)/output)`suspend fun `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)`.downloadAndClose(output: `[`OutputStream`](https://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html)`): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)<br>`suspend fun `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)`.downloadAndClose(output: Output): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)<br>`suspend fun `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)`.downloadAndClose(output: ByteWriteChannel): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) |
| [downloadTo](download-to.md) | `suspend fun `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)`.downloadTo(file: `[`File`](https://docs.oracle.com/javase/6/docs/api/java/io/File.html)`): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)<br>下载图片到 [output](download-to.md#net.mamoe.mirai.message.MessagePacket$downloadTo(net.mamoe.mirai.message.data.Image, java.io.OutputStream)/output) 但不关闭这个 [output](download-to.md#net.mamoe.mirai.message.MessagePacket$downloadTo(net.mamoe.mirai.message.data.Image, java.io.OutputStream)/output)`suspend fun `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)`.downloadTo(output: `[`OutputStream`](https://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html)`): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)<br>`suspend fun `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)`.downloadTo(output: Output): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)<br>`suspend fun `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)`.downloadTo(output: ByteWriteChannel): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) |
| [send](send.md) | `suspend fun `[`BufferedImage`](https://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)`.send(): `[`MessageReceipt`](../-message-receipt/index.md)`<TSubject>` |
| [sendAsImage](send-as-image.md) | `suspend fun `[`URL`](https://docs.oracle.com/javase/6/docs/api/java/net/URL.html)`.sendAsImage(): `[`MessageReceipt`](../-message-receipt/index.md)`<TSubject>`<br>`suspend fun Input.sendAsImage(): `[`MessageReceipt`](../-message-receipt/index.md)`<TSubject>`<br>`suspend fun `[`InputStream`](https://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)`.sendAsImage(): `[`MessageReceipt`](../-message-receipt/index.md)`<TSubject>`<br>`suspend fun `[`File`](https://docs.oracle.com/javase/6/docs/api/java/io/File.html)`.sendAsImage(): `[`MessageReceipt`](../-message-receipt/index.md)`<TSubject>` |
| [sendImage](send-image.md) | `suspend fun sendImage(image: `[`BufferedImage`](https://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)`): `[`MessageReceipt`](../-message-receipt/index.md)`<TSubject>`<br>`suspend fun sendImage(image: `[`URL`](https://docs.oracle.com/javase/6/docs/api/java/net/URL.html)`): `[`MessageReceipt`](../-message-receipt/index.md)`<TSubject>`<br>`suspend fun sendImage(image: Input): `[`MessageReceipt`](../-message-receipt/index.md)`<TSubject>`<br>`suspend fun sendImage(image: `[`InputStream`](https://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)`): `[`MessageReceipt`](../-message-receipt/index.md)`<TSubject>`<br>`suspend fun sendImage(image: `[`File`](https://docs.oracle.com/javase/6/docs/api/java/io/File.html)`): `[`MessageReceipt`](../-message-receipt/index.md)`<TSubject>` |
| [upload](upload.md) | `suspend fun `[`BufferedImage`](https://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)`.upload(): `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md) |
| [uploadAsImage](upload-as-image.md) | `suspend fun `[`URL`](https://docs.oracle.com/javase/6/docs/api/java/net/URL.html)`.uploadAsImage(): `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)<br>`suspend fun Input.uploadAsImage(): `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)<br>`suspend fun `[`InputStream`](https://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)`.uploadAsImage(): `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)<br>`suspend fun `[`File`](https://docs.oracle.com/javase/6/docs/api/java/io/File.html)`.uploadAsImage(): `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md) |
| [uploadImage](upload-image.md) | `suspend fun uploadImage(image: `[`BufferedImage`](https://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)`): `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)<br>`suspend fun uploadImage(image: `[`URL`](https://docs.oracle.com/javase/6/docs/api/java/net/URL.html)`): `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)<br>`suspend fun uploadImage(image: Input): `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)<br>`suspend fun uploadImage(image: `[`InputStream`](https://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)`): `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md)<br>`suspend fun uploadImage(image: `[`File`](https://docs.oracle.com/javase/6/docs/api/java/io/File.html)`): `[`Image`](../../net.mamoe.mirai.message.data/-image/index.md) |

### Extension Functions

| [broadcast](../../net.mamoe.mirai.event/broadcast.md) | 广播一个事件的唯一途径.`suspend fun <E : `[`Event`](../../net.mamoe.mirai.event/-event.md)`> E.broadcast(): E` |
| [isContextIdenticalWith](../is-context-identical-with.md) | `fun `[`MessagePacket`](./index.md)`<*, *>.~~isContextIdenticalWith~~(another: `[`MessagePacket`](./index.md)`<*, *>): `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html) |

### Inheritors

| [ContactMessage](../-contact-message/index.md) | 一条消息事件. 它是一个 [BotEvent](../../net.mamoe.mirai.event.events/-bot-event/index.md), 因此可以被 [监听](#)`abstract class ContactMessage : `[`MessagePacket`](./index.md)`<`[`User`](../../net.mamoe.mirai.contact/-user/index.md)`, `[`Contact`](../../net.mamoe.mirai.contact/-contact/index.md)`>, `[`BotEvent`](../../net.mamoe.mirai.event.events/-bot-event/index.md) |

