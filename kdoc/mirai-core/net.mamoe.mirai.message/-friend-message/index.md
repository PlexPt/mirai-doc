[mirai-core](../../index.md) / [net.mamoe.mirai.message](../index.md) / [FriendMessage](./index.md)

# FriendMessage

`class FriendMessage : `[`ContactMessage`](../-contact-message/index.md)`, `[`BroadcastControllable`](../../net.mamoe.mirai.event/-broadcast-controllable/index.md)

好友消息

### Constructors

| [&lt;init&gt;](-init-.md) | `FriendMessage(sender: `[`QQ`](../../net.mamoe.mirai.contact/-q-q/index.md)`, message: `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`)`<br>`FriendMessage(sender: `[`Friend`](../../net.mamoe.mirai.contact/-friend/index.md)`, message: `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`)`<br>好友消息`FriendMessage(sender: `[`Friend`](../../net.mamoe.mirai.contact/-friend/index.md)`, message: `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`, time: `[`Int`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html)`)` |

### Properties

| [bot](bot.md) | `val bot: `[`Bot`](../../net.mamoe.mirai/-bot/index.md) |
| [message](message.md) | 消息内容`val message: `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md) |
| [sender](sender.md) | 发送人.`val sender: `[`Friend`](../../net.mamoe.mirai.contact/-friend/index.md) |
| [senderName](sender-name.md) | `val senderName: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html) |
| [source](source.md) | 消息源`val source: FromFriend` |
| [subject](subject.md) | 消息事件主体.`val subject: `[`Friend`](../../net.mamoe.mirai.contact/-friend/index.md) |
| [time](time.md) | 消息发送时间 (由服务器提供)`val time: `[`Int`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html) |

### Functions

| [toString](to-string.md) | `fun toString(): `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html) |

### Extension Functions

| [broadcast](../../net.mamoe.mirai.event/broadcast.md) | 广播一个事件的唯一途径.`suspend fun <E : `[`Event`](../../net.mamoe.mirai.event/-event.md)`> E.broadcast(): E` |
| [buildForwardMessage](../../net.mamoe.mirai.message.data/build-forward-message.md) | 使用 DSL 构建一个 [ForwardMessage](../../net.mamoe.mirai.message.data/-forward-message/index.md).`fun `[`ContactMessage`](../-contact-message/index.md)`.buildForwardMessage(context: `[`Contact`](../../net.mamoe.mirai.contact/-contact/index.md)` = this.subject, displayStrategy: DisplayStrategy = DisplayStrategy, block: `[`ForwardMessageBuilder`](../../net.mamoe.mirai.message.data/-forward-message-builder/index.md)`.() -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): `[`ForwardMessage`](../../net.mamoe.mirai.message.data/-forward-message/index.md) |
| [isContextIdenticalWith](../is-context-identical-with.md) | 判断两个 [MessagePacket](../-message-packet/index.md) 的 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 是否相同`fun `[`ContactMessage`](../-contact-message/index.md)`.isContextIdenticalWith(another: `[`ContactMessage`](../-contact-message/index.md)`): `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`fun `[`MessagePacket`](../-message-packet/index.md)`<*, *>.~~isContextIdenticalWith~~(another: `[`MessagePacket`](../-message-packet/index.md)`<*, *>): `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html) |
| [nextMessage](../next-message.md) | 挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message/-this-.md) 相同且通过 [筛选](../next-message.md#net.mamoe.mirai.message$nextMessage(net.mamoe.mirai.message.nextMessage.P, kotlin.Long, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.message.nextMessage.P, , kotlin.Boolean)))/filter) 的 [MessagePacket](../-message-packet/index.md)`suspend fun <P : `[`ContactMessage`](../-contact-message/index.md)`> P.nextMessage(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, filter: suspend P.(P) -> `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`): `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)<br>挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message/-this-.md) 相同的 [MessagePacket](../-message-packet/index.md)`suspend fun <P : `[`ContactMessage`](../-contact-message/index.md)`> P.nextMessage(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1): `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md) |
| [nextMessageAsync](../next-message-async.md) | `fun <P : `[`ContactMessage`](../-contact-message/index.md)`> P.nextMessageAsync(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext): Deferred<`[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`>`<br>`fun <P : `[`ContactMessage`](../-contact-message/index.md)`> P.nextMessageAsync(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, filter: suspend P.(P) -> `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`): Deferred<`[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`>` |
| [nextMessageContaining](../next-message-containing.md) | 挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message-containing/-this-.md) 相同的 [MessagePacket](../-message-packet/index.md)`suspend fun <M : `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`> `[`ContactMessage`](../-contact-message/index.md)`.nextMessageContaining(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1): M` |
| [nextMessageContainingAsync](../next-message-containing-async.md) | `fun <M : `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`> `[`ContactMessage`](../-contact-message/index.md)`.nextMessageContainingAsync(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext): Deferred<M>` |
| [nextMessageContainingOrNull](../next-message-containing-or-null.md) | 挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message-containing-or-null/-this-.md) 相同并含有 [M](../next-message-containing-or-null.md#M) 类型的消息的 [MessagePacket](../-message-packet/index.md)`suspend fun <M : `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`> `[`ContactMessage`](../-contact-message/index.md)`.nextMessageContainingOrNull(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1): M?` |
| [nextMessageContainingOrNullAsync](../next-message-containing-or-null-async.md) | `fun <M : `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`> `[`ContactMessage`](../-contact-message/index.md)`.nextMessageContainingOrNullAsync(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext): Deferred<M?>` |
| [nextMessageOrNull](../next-message-or-null.md) | 挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message-or-null/-this-.md) 相同且通过 [筛选](../next-message-or-null.md#net.mamoe.mirai.message$nextMessageOrNull(net.mamoe.mirai.message.nextMessageOrNull.P, kotlin.Long, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.message.nextMessageOrNull.P, , kotlin.Boolean)))/filter) 的 [MessagePacket](../-message-packet/index.md)`suspend fun <P : `[`ContactMessage`](../-contact-message/index.md)`> P.nextMessageOrNull(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, filter: suspend P.(P) -> `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`): `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`?`<br>挂起当前协程, 等待下一条 [MessagePacket.sender](../-message-packet-base/sender.md) 和 [MessagePacket.subject](../-message-packet-base/subject.md) 与 [this](../next-message-or-null/-this-.md) 相同的 [MessagePacket](../-message-packet/index.md)`suspend fun <P : `[`ContactMessage`](../-contact-message/index.md)`> P.nextMessageOrNull(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1): `[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`?` |
| [nextMessageOrNullAsync](../next-message-or-null-async.md) | `fun <P : `[`ContactMessage`](../-contact-message/index.md)`> P.nextMessageOrNullAsync(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext): Deferred<`[`MessageChain`](../../net.mamoe.mirai.message.data/-message-chain/index.md)`?>` |
| [selectMessages](../../net.mamoe.mirai.event/select-messages.md) | 挂起当前协程, 等待任意一个事件监听器触发后返回其返回值.`suspend fun <T : `[`ContactMessage`](../-contact-message/index.md)`, R> T.selectMessages(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, filterContext: `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)` = true, selectBuilder: `[`MessageSelectBuilder`](../../net.mamoe.mirai.event/-message-select-builder/index.md)`<T, R>.() -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): R` |
| [selectMessagesUnit](../../net.mamoe.mirai.event/select-messages-unit.md) | [selectMessages](../../net.mamoe.mirai.event/select-messages.md) 的 [Unit](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) 返回值捷径 (由于 Kotlin 无法推断 [Unit](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) 类型)`suspend fun <T : `[`ContactMessage`](../-contact-message/index.md)`> T.selectMessagesUnit(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, filterContext: `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)` = true, selectBuilder: `[`MessageSelectBuilderUnit`](../../net.mamoe.mirai.event/-message-select-builder-unit/index.md)`<T, `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`>.() -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) |
| [whileSelectMessages](../../net.mamoe.mirai.event/while-select-messages.md) | 挂起当前协程, 等待任意一个事件监听器返回 `false` 后返回.`suspend fun <T : `[`ContactMessage`](../-contact-message/index.md)`> T.whileSelectMessages(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, filterContext: `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)` = true, selectBuilder: `[`MessageSelectBuilder`](../../net.mamoe.mirai.event/-message-select-builder/index.md)`<T, `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`>.() -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html) |

