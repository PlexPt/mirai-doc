[mirai-core](../../index.md) / [net.mamoe.mirai.event](../index.md) / [MessageSelectBuilder](./index.md)

# MessageSelectBuilder

`@SinceMirai("0.29.0") abstract class MessageSelectBuilder<M : `[`ContactMessage`](../../net.mamoe.mirai.message/-contact-message/index.md)`, R> : `[`MessageSelectBuilderUnit`](../-message-select-builder-unit/index.md)`<M, R>`

[selectMessages](../select-messages.md) 时的 DSL 构建器.

它是特殊化的消息监听 ([subscribeMessages](../kotlinx.coroutines.-coroutine-scope/subscribe-messages.md)) DSL, 屏蔽了一些 `reply` DSL 以确保作用域安全性

**See Also**

[MessageSelectBuilderUnit](../-message-select-builder-unit/index.md)

### Functions

| [-&gt;](--.md) | `open infix fun `[`MessageSelectionTimeoutChecker`](../-message-selection-timeout-checker/index.md)`.~~->~~(message: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>`open infix fun `[`MessageSelectionTimeoutChecker`](../-message-selection-timeout-checker/index.md)`.~~->~~(message: `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>启动这个监听器, 在满足条件时回复原消息`open fun ListeningFilter<M, `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`, R, `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?>.~~->~~(toReply: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>`open fun ListeningFilter<M, `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`, R, `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?>.~~->~~(message: `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html) |
| [always](always.md) | 无任何触发条件, 每次收到消息都执行 [onEvent](../-message-subscribers-builder/always.md#net.mamoe.mirai.event.MessageSubscribersBuilder$always(kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, kotlin.String, net.mamoe.mirai.event.MessageSubscribersBuilder.RR)))/onEvent)`open fun ~~always~~(onEvent: `[`MessageListener`](../-message-listener.md)`<M, `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?>): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html) |
| [containsReply](contains-reply.md) | [消息内容](../../net.mamoe.mirai.message.data/-message/content-to-string.md)包含 [this](../-message-subscribers-builder/contains-reply/-this-.md) 则回复 [reply](../-message-subscribers-builder/contains-reply.md#net.mamoe.mirai.event.MessageSubscribersBuilder$containsReply(kotlin.String, kotlin.String)/reply)`open fun `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`.~~containsReply~~(reply: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>[消息内容](../../net.mamoe.mirai.message.data/-message/content-to-string.md)包含 [this](../-message-subscribers-builder/contains-reply/-this-.md) 则执行 [replier](../-message-subscribers-builder/contains-reply.md#net.mamoe.mirai.event.MessageSubscribersBuilder$containsReply(kotlin.String, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, kotlin.String, kotlin.Any)))/replier) 并将其返回值回复给发信对象.`open fun `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`.~~containsReply~~(replier: suspend M.(`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`) -> `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html) |
| [endsWithReply](ends-with-reply.md) | 不考虑空格, [消息内容](../../net.mamoe.mirai.message.data/-message/content-to-string.md)以 [this](../-message-subscribers-builder/ends-with-reply/-this-.md) 结尾则执行 [replier](../-message-subscribers-builder/ends-with-reply.md#net.mamoe.mirai.event.MessageSubscribersBuilder$endsWithReply(kotlin.String, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, kotlin.String, kotlin.Any)))/replier) 并将其返回值回复给发信对象.`open fun `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`.~~endsWithReply~~(replier: suspend M.(`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`) -> `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html) |
| [findingReply](finding-reply.md) | [消息内容](../../net.mamoe.mirai.message.data/-message/content-to-string.md)可由正则表达式查找([Regex.find](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex/find.html)), 则执行 [replier](../-message-subscribers-builder/finding-reply.md#net.mamoe.mirai.event.MessageSubscribersBuilder$findingReply(kotlin.text.Regex, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, kotlin.text.MatchResult, kotlin.Any)))/replier) 并将其返回值回复给发信对象.`open fun `[`Regex`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex/index.html)`.~~findingReply~~(replier: suspend M.(`[`MatchResult`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-match-result/index.html)`) -> `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html) |
| [mapping](mapping.md) | 如果 [mapper](../-message-subscribers-builder/mapping.md#net.mamoe.mirai.event.MessageSubscribersBuilder$mapping(kotlin.Function2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, kotlin.String, net.mamoe.mirai.event.MessageSubscribersBuilder.mapping.N)), kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, net.mamoe.mirai.event.MessageSubscribersBuilder.mapping.N, net.mamoe.mirai.event.MessageSubscribersBuilder.R)))/mapper) 返回值非空, 就执行 [onEvent](../-message-subscribers-builder/mapping.md#net.mamoe.mirai.event.MessageSubscribersBuilder$mapping(kotlin.Function2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, kotlin.String, net.mamoe.mirai.event.MessageSubscribersBuilder.mapping.N)), kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, net.mamoe.mirai.event.MessageSubscribersBuilder.mapping.N, net.mamoe.mirai.event.MessageSubscribersBuilder.R)))/onEvent)`open fun <N : `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`> ~~mapping~~(mapper: M.(`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`) -> N?, onEvent: suspend M.(N) -> R): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html) |
| [matchingReply](matching-reply.md) | [消息内容](../../net.mamoe.mirai.message.data/-message/content-to-string.md)可由正则表达式匹配([Regex.matchEntire](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex/match-entire.html)), 则执行 [replier](../-message-subscribers-builder/matching-reply.md#net.mamoe.mirai.event.MessageSubscribersBuilder$matchingReply(kotlin.text.Regex, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, kotlin.text.MatchResult, kotlin.Any)))/replier) 并将其返回值回复给发信对象.`open fun `[`Regex`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex/index.html)`.~~matchingReply~~(replier: suspend M.(`[`MatchResult`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-match-result/index.html)`) -> `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html) |
| [quoteReply](quote-reply.md) | 在超时后引用回复原消息`open infix fun `[`MessageSelectionTimeoutChecker`](../-message-selection-timeout-checker/index.md)`.~~quoteReply~~(block: suspend () -> `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)`open infix fun `[`MessageSelectionTimeoutChecker`](../-message-selection-timeout-checker/index.md)`.~~quoteReply~~(message: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>`open infix fun `[`MessageSelectionTimeoutChecker`](../-message-selection-timeout-checker/index.md)`.~~quoteReply~~(message: `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>启动这个监听器, 在满足条件时引用回复原消息`open fun ListeningFilter<M, `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`, R, `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?>.~~quoteReply~~(toReply: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>`open fun ListeningFilter<M, `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`, R, `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?>.~~quoteReply~~(toReply: `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>启动这个监听器, 在满足条件时执行 [replier](../-message-subscribers-builder/quote-reply.md#net.mamoe.mirai.event.MessageSubscribersBuilder$quoteReply(net.mamoe.mirai.event.MessageSubscribersBuilder.ListeningFilter((net.mamoe.mirai.event.MessageSubscribersBuilder.M, net.mamoe.mirai.event.MessageSubscribersBuilder.Ret, net.mamoe.mirai.event.MessageSubscribersBuilder.R, net.mamoe.mirai.event.MessageSubscribersBuilder.RR)), kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, kotlin.String, kotlin.Any)))/replier) 并引用回复原消息`open fun ListeningFilter<M, `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`, R, `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?>.~~quoteReply~~(replier: suspend M.(`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`) -> `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html) |
| [reply](reply.md) | 在超时后回复原消息`open infix fun `[`MessageSelectionTimeoutChecker`](../-message-selection-timeout-checker/index.md)`.~~reply~~(block: suspend () -> `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)`open infix fun `[`MessageSelectionTimeoutChecker`](../-message-selection-timeout-checker/index.md)`.~~reply~~(message: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>`open infix fun `[`MessageSelectionTimeoutChecker`](../-message-selection-timeout-checker/index.md)`.~~reply~~(message: `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>当发送的消息内容为 [this](../-message-subscribers-builder/reply/-this-.md) 就回复 [reply](../-message-subscribers-builder/reply.md#net.mamoe.mirai.event.MessageSubscribersBuilder$reply(kotlin.String, kotlin.String)/reply)`open fun `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`.~~reply~~(reply: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>`open fun `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`.~~reply~~(reply: `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>当发送的消息内容为 [this](../-message-subscribers-builder/reply/-this-.md) 就执行并回复 [replier](../-message-subscribers-builder/reply.md#net.mamoe.mirai.event.MessageSubscribersBuilder$reply(kotlin.String, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, kotlin.String, kotlin.Any)))/replier) 的返回值`open fun `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`.~~reply~~(replier: suspend M.(`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`) -> `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>启动这个监听器, 在满足条件时回复原消息`open fun ListeningFilter<M, `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`, R, `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?>.~~reply~~(toReply: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>`open fun ListeningFilter<M, `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`, R, `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?>.~~reply~~(message: `[`Message`](../../net.mamoe.mirai.message.data/-message/index.md)`): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html)<br>`open fun ListeningFilter<M, `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`, R, `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?>.~~reply~~(replier: suspend M.(`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`) -> `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html) |
| [startsWithReply](starts-with-reply.md) | 不考虑空格, [消息内容](../../net.mamoe.mirai.message.data/-message/content-to-string.md)以 [this](../-message-subscribers-builder/starts-with-reply/-this-.md) 开始则执行 [replier](../-message-subscribers-builder/starts-with-reply.md#net.mamoe.mirai.event.MessageSubscribersBuilder$startsWithReply(kotlin.String, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.MessageSubscribersBuilder.M, kotlin.String, kotlin.Any)))/replier) 并将其返回值回复给发信对象.`open fun `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`.~~startsWithReply~~(replier: suspend M.(`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`) -> `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`?): `[`Nothing`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html) |

