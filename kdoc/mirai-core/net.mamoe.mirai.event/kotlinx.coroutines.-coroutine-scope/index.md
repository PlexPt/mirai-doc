[mirai-core](../../index.md) / [net.mamoe.mirai.event](../index.md) / [kotlinx.coroutines.CoroutineScope](./index.md)

### Extensions for kotlinx.coroutines.CoroutineScope

| [asyncFromEvent](async-from-event.md) | 异步监听这个事件, 并尝试从这个事件中获取一个值.`fun <E : `[`Event`](../-event.md)`, R : `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`> CoroutineScope.asyncFromEvent(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)` = -1, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, mapper: suspend E.(E) -> R?): Deferred<R>` |
| [asyncFromEventOrNull](async-from-event-or-null.md) | 异步监听这个事件, 并尝试从这个事件中获取一个值.`fun <E : `[`Event`](../-event.md)`, R : `[`Any`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html)`> CoroutineScope.asyncFromEventOrNull(timeoutMillis: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)`, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, mapper: suspend E.(E) -> R?): Deferred<R?>` |
| [incoming](incoming.md) | 打开一个指定事件的接收通道`fun <E : `[`Event`](../-event.md)`> CoroutineScope.incoming(coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, concurrencyKind: ConcurrencyKind = Listener.ConcurrencyKind.CONCURRENT, capacity: `[`Int`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html)` = Channel.UNLIMITED): ReceiveChannel<E>` |
| [subscribe](subscribe.md) | 在指定的 [CoroutineScope](#) 下订阅所有 [E](subscribe.md#E) 及其子类事件. 每当 [事件广播](../broadcast.md) 时, [handler](subscribe.md#net.mamoe.mirai.event$subscribe(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribe.E, , net.mamoe.mirai.event.ListeningStatus)))/handler) 都会被执行.`fun <E : `[`Event`](../-event.md)`> CoroutineScope.subscribe(coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, concurrency: ConcurrencyKind = Listener.ConcurrencyKind.LOCKED, handler: suspend E.(E) -> `[`ListeningStatus`](../-listening-status/index.md)`): `[`Listener`](../-listener/index.md)`<E>``fun <E : `[`Event`](../-event.md)`> CoroutineScope.subscribe(eventClass: `[`KClass`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html)`<E>, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, concurrency: ConcurrencyKind = Listener.ConcurrencyKind.LOCKED, handler: suspend E.(E) -> `[`ListeningStatus`](../-listening-status/index.md)`): `[`Listener`](../-listener/index.md)`<E>` |
| [subscribeAlways](subscribe-always.md) | 在指定的 [CoroutineScope](#) 下订阅所有 [E](subscribe-always.md#E) 及其子类事件. 每当 [事件广播](../broadcast.md) 时, [listener](subscribe-always.md#net.mamoe.mirai.event$subscribeAlways(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, net.mamoe.mirai.event.Listener.ConcurrencyKind, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribeAlways.E, , kotlin.Unit)))/listener) 都会被执行.`fun <E : `[`Event`](../-event.md)`> CoroutineScope.subscribeAlways(coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, concurrency: ConcurrencyKind = Listener.ConcurrencyKind.LOCKED, listener: suspend E.(E) -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): `[`Listener`](../-listener/index.md)`<E>``fun <E : `[`Event`](../-event.md)`> CoroutineScope.subscribeAlways(eventClass: `[`KClass`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html)`<E>, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, concurrency: ConcurrencyKind = Listener.ConcurrencyKind.LOCKED, listener: suspend E.(E) -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): `[`Listener`](../-listener/index.md)`<E>` |
| [subscribeFriendMessages](subscribe-friend-messages.md) | 订阅来自所有 [Bot](../../net.mamoe.mirai/-bot/index.md) 的所有好友消息事件`fun <R> CoroutineScope.subscribeFriendMessages(coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, concurrencyKind: ConcurrencyKind = Listener.ConcurrencyKind.CONCURRENT, listeners: `[`FriendMessageSubscribersBuilder`](../-friend-message-subscribers-builder.md)`.() -> R): R` |
| [subscribeGroupMessages](subscribe-group-messages.md) | 订阅来自所有 [Bot](../../net.mamoe.mirai/-bot/index.md) 的所有群消息事件`fun <R> CoroutineScope.subscribeGroupMessages(coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, concurrencyKind: ConcurrencyKind = Listener.ConcurrencyKind.CONCURRENT, listeners: `[`GroupMessageSubscribersBuilder`](../-group-message-subscribers-builder.md)`.() -> R): R` |
| [subscribeMessages](subscribe-messages.md) | 订阅来自所有 [Bot](../../net.mamoe.mirai/-bot/index.md) 的所有联系人的消息事件. 联系人可以是任意群或任意好友或临时会话.`fun <R> CoroutineScope.subscribeMessages(coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, concurrencyKind: ConcurrencyKind = Listener.ConcurrencyKind.CONCURRENT, listeners: `[`MessagePacketSubscribersBuilder`](../-message-packet-subscribers-builder.md)`.() -> R): R` |
| [subscribeOnce](subscribe-once.md) | 在指定的 [CoroutineScope](#) 下订阅所有 [E](subscribe-once.md#E) 及其子类事件. 仅在第一次 [事件广播](../broadcast.md) 时, [listener](subscribe-once.md#net.mamoe.mirai.event$subscribeOnce(kotlinx.coroutines.CoroutineScope, kotlin.coroutines.CoroutineContext, kotlin.coroutines.SuspendFunction2((net.mamoe.mirai.event.subscribeOnce.E, , kotlin.Unit)))/listener) 会被执行.`fun <E : `[`Event`](../-event.md)`> CoroutineScope.subscribeOnce(coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, listener: suspend E.(E) -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): `[`Listener`](../-listener/index.md)`<E>``fun <E : `[`Event`](../-event.md)`> CoroutineScope.subscribeOnce(eventClass: `[`KClass`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html)`<E>, coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, listener: suspend E.(E) -> `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)`): `[`Listener`](../-listener/index.md)`<E>` |
| [subscribeTempMessages](subscribe-temp-messages.md) | 订阅来自所有 [Bot](../../net.mamoe.mirai/-bot/index.md) 的所有临时会话消息事件`fun <R> CoroutineScope.subscribeTempMessages(coroutineContext: `[`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html)` = EmptyCoroutineContext, concurrencyKind: ConcurrencyKind = Listener.ConcurrencyKind.CONCURRENT, listeners: `[`TempMessageSubscribersBuilder`](../-temp-message-subscribers-builder.md)`.() -> R): R` |

